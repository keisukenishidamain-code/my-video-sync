<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>27 Club - GALLERY</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <style>
        :root { --main-red: #ff0033; --neon: 0 0 15px #ff0033; --bg-black: #050505; }
        body { margin: 0; background: var(--bg-black); color: white; font-family: 'Orbitron', sans-serif; }
        
        header { 
            background: #000; padding: 20px 40px; display: flex; 
            justify-content: space-between; align-items: center;
            border-bottom: 2px solid #1a1a1a; position: sticky; top: 0; z-index: 100;
        }
        .logo { font-size: 24px; font-weight: 900; letter-spacing: 5px; text-decoration: none; color: white; }
        .logo span { color: var(--main-red); text-shadow: var(--neon); }

        nav a { color: #666; text-decoration: none; font-size: 13px; font-weight: 900; margin-left: 30px; letter-spacing: 2px; }
        nav a:hover { color: white; text-shadow: 0 0 8px white; }

        .container { padding: 40px; max-width: 1400px; margin: 0 auto; }
        h1 { font-size: 14px; letter-spacing: 10px; color: #444; text-align: center; margin-bottom: 40px; border-bottom: 1px solid #111; padding-bottom: 20px; }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .gallery-item {
            background: #000; border-radius: 10px; overflow: hidden;
            border: 1px solid #222; transition: 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative; aspect-ratio: 16/9;
        }
        .gallery-item:hover { border-color: var(--main-red); transform: scale(1.02); box-shadow: 0 10px 30px rgba(255,0,51,0.2); z-index: 10; }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; }
        
        /* 投稿日を薄く表示 */
        .img-date { position: absolute; bottom: 10px; right: 10px; font-size: 9px; color: rgba(255,255,255,0.4); background: rgba(0,0,0,0.6); padding: 3px 8px; border-radius: 3px; }
    </style>
</head>
<body>

<header>
    <a href="index.html" class="logo"><span>27</span> CLUB</a>
    <nav>
        <a href="index.html">LIVE</a>
        <a href="archive.html">ARCHIVE</a>
    </nav>
</header>

<div class="container">
    <h1>OPERATING SNAPSHOTS</h1>
    <div id="gallery-list" class="gallery-grid"></div>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyDoZtzHkOcC3p565fLN4oGO7vmlwQZiNkE",
        databaseURL: "https://club-d0011-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "club-d0011",
        appId: "1:51948793811:web:1edecab7c41c1d84ad8926"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    db.ref('gallery').orderByChild('timestamp').on('value', snap => {
        const list = document.getElementById('gallery-list');
        list.innerHTML = "";
        let items = [];
        snap.forEach(c => { items.push(c.val()); });
        items.reverse().forEach(item => {
            const date = item.timestamp ? new Date(item.timestamp).toLocaleDateString() : "";
            const div = document.createElement('div');
            div.className = "gallery-item";
            div.innerHTML = `<img src="${item.url}" loading="lazy"><div class="img-date">${date}</div>`;
            list.appendChild(div);
        });
    });
</script>
</body>
</html>
